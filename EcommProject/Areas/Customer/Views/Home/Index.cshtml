@*@model IEnumerable<EcommProject.Models.Product>

<form asp-action="Index" method="post">
    <div class="row">
        <h4 class="col-2">Search:</h4>
        <div class="form-check col-1">
            <input class="form-check-input" type="radio" name="search" id="searchAll" value="All">
            <label class="form-check-label" for="searchAll">
                All
            </label>
        </div>
        <div class="form-check col-1">
            <input class="form-check-input" type="radio" name="search" id="searchTitle" value="Title">
            <label class="form-check-label" for="searchTitle">
                Title
            </label>
        </div>
        <div class="form-check col-1">
            <input class="form-check-input" type="radio" name="search" id="searchAuthor" value="Author">
            <label class="form-check-label" for="searchAuthor">
                Author
            </label>
        </div>
        <input class="col-4 form-control mr-sm-2" type="text" name="searchTxt">
        <button class="btn btn-primary my-2 my-sm-0" type="submit">Search</button>
    </div>
</form>

<div id="carouselExampleSlidesOnly" class="carousel slide carousel-fade mt-2" data-bs-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="https://thumbs.dreamstime.com/b/back-to-school-sale-yellow-line-art-banner-symbols-education-science-objects-paper-cut-out-icons-vector-hand-drawn-152261182.jpg" class="d-block w-100" height="300vh" style="border-radius: 40px" alt="...">
        </div>
        <div class="carousel-item">
            <img src="https://img.freepik.com/free-vector/flat-social-media-cover-template-world-book-day-celebration_23-2150201450.jpg" class="d-block w-100" height="300vh" style="border-radius: 40px" alt="...">
        </div>
        <div class="carousel-item">
            <img src="https://img.freepik.com/premium-vector/hand-drawn-flat-sale-back-school-banner_23-2149500750.jpg" class="d-block w-100" height="300vh" style="border-radius: 40px" alt="...">
        </div>
    </div>
</div>

<div class="row">
    @foreach (var product in Model)
    {
        <div class="col-lg-3 col-md-6">
            <div class="row p-2">
                <div class="col-12 p-1" style="border:1px solid #008cba; border-radius: 5px;">
                    <div style="border:0; background: linear-gradient(gray 40%, white 60%)">
                        <img src="@product.ImageUrl" class="card-img-top rounded" style="height:280px" />
                        <div class="pl-1">
                            <p class="card-title h5">
                                <b style="color:#2c3e50">@product.Title</b>
                            </p>
                            <p class="card-title text-primary">
                                by <b>@product.Author</b>
                            </p>
                        </div>
                        <div style="padding-left:5px;">
                            <p>
                                List Price: <strike><b class="card-title">$@product.ListPrice.ToString("0.00")</b></strike>
                            </p>
                        </div>
                        <div style="padding-left:5px;">
                            <p style="color:maroon">
                                As low as: <b class="card-title">$@product.Price100.ToString("0.00")</b>
                            </p>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="row p-2">
                                <div class="col-12 p-1" style="border:1px solid #008cba; border-radius: 5px;">
                                    <div style="border:0; background: linear-gradient(gray 40%, white 60%)">
                                        <img src="@product.ImageUrl" class="card-img-top rounded" style="height:280px" />
                                        <div class="pl-1">
                                            <p class="card-title h5">
                                                <b style="color:#2c3e50">@product.Title</b>
                                            </p>
                                            <p class="card-title text-primary">
                                                by <b>@product.Author</b>
                                            </p>
                                        </div>
                                        <div style="padding-left:5px;">
                                            <p>
                                                List Price: <strike><b class="card-title">$@product.ListPrice.ToString("0.00")</b></strike>
                                            </p>
                                        </div>
                                        <div style="padding-left:5px;">
                                            <p style="color:maroon">
                                                As low as: <b class="card-title">$@product.Price100.ToString("0.00")</b>
                                            </p>
                                        </div>
                                    </div>
                                    <div>
                                        <a asp-action="Details" class="btn btn-primary form-control" asp-route-id="@product.Id">Details</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <a asp-action="Details" class="btn btn-primary form-control" asp-route-id="@product.Id">Details</a>
                    </div>
                </div>
            </div>
        </div>
    }
</div>

<!--ADS IFRAME-->
<h1 class="container-fluid d-flex justify-content-center pt-5">
    OUR TOP COMMERCIALS
</h1>
<section class="d-flex mt-5 flex-wrap justify-content-between">
    <iframe width="550" height="315" src="https://www.youtube.com/embed/jdjYt7DFsZg?si=WpTl7xY_GwhM-h3y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

    <iframe width="550" height="315" src="https://www.youtube.com/embed/3FbiUs928NQ?si=4rfBfl6WQsMh9s5J" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</section>*@


@*@model IEnumerable<EcommProject.Models.Product>

<div class="row">
    <table id="productTable" style="display: none;">
        <thead>
            <tr>
                <th>Title</th>
                <th>Author</th>
                <th>List Price</th>
                <th>Price</th>
                <th>ImageURL</th>
                <th>Id</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var product in Model)
            {
                <tr>
                    <td>@product.Title</td>
                    <td>@product.Author</td>
                    <td>$@product.ListPrice.ToString("0.00")</td>
                    <td>$@product.Price100.ToString("0.00")</td>
                    <td>@product.ImageUrl</td>
                    <td>@product.Id</td>
                </tr>
            }
        </tbody>
    </table>
</div>

<div class="row mb-4">
    <div class="col-12 d-flex justify-content-between">
        <div id="productTable_length" class="dataTables_length"></div>
        <div id="productTable_filter" class="dataTables_filter"></div>
    </div>
</div>

<div class="row" id="productCards">
    @foreach (var product in Model)
    {
        <div class="col-lg-3 col-md-6 product-card" data-title="@product.Title" data-author="@product.Author" data-list-price="@product.ListPrice" data-price="@product.Price100" data-image-url="@product.ImageUrl" data-id="@product.Id">
            <div class="row p-2">
                <div class="col-12  p-1" style="border:1px solid #008cba; border-radius: 5px;">
                    <div class="card" style="border:0px;">
                        <img src="@product.ImageUrl" style="height:250px;width:400px;" class="card-img-top rounded" height="250" width="300" />
                        <div class="pl-1">
                            <p class="card-title h5"><b style="color:#2c3e50">@product.Title</b></p>
                            <p class="card-title text-primary">by <b>@product.Author</b></p>
                            <p class="card-title text-primary">Total Sold : <b></b></p>
                        </div>
                        <div style="padding-left:5px;">
                            <p>List Price: <strike><b class="">$@product.ListPrice.ToString("0.00")</b></strike></p>
                        </div>
                        <div style="padding-left:5px;">
                            <p style="color:maroon">As low as: <b class="">$@product.Price100.ToString("0.00")</b></p>
                        </div>
                    </div>
                    <div>
                        <a asp-action="Details" class="btn btn-primary form-control" asp-route-id="@product.Id">Details</a>
                    </div>
                </div>
            </div>
        </div>
    }
</div>

<div class="row mt-4">
    <div class="col-12 d-flex justify-content-between">
        <div id="productTable_info" class="dataTables_info"></div>
        <div id="productTable_paginate" class="dataTables_paginate paging_simple_numbers"></div>
    </div>
</div>

@section scripts {
    <script>
        $(document).ready(function () {
            var table = $('#productTable').DataTable({
                "paging": true,
                "info": true,
                "searching": true,
                "dom": '<"top"lf>rt<"bottom"ip><"clear">'
            });

            $('#productTable_length').prependTo('.row.mb-4 .col-12.d-flex.justify-content-between');
            $('#productTable_filter').appendTo('.row.mb-4 .col-12.d-flex.justify-content-between');
            $('#productTable_info').appendTo('.row.mt-4 .col-12.d-flex.justify-content-between');
            $('#productTable_paginate').appendTo('.row.mt-4 .col-12.d-flex.justify-content-between');

            function updateCards() {
                var filteredData = table.rows({ filter: 'applied' }).data();
                var $productCards = $('#productCards');
                $productCards.empty();

                for (var i = 0; i < filteredData.length; i++) {
                    var row = filteredData[i];
                    var cardHtml = `
                                                        <div class="col-lg-3 col-md-6 product-card" data-title="${row[0]}" data-author="${row[1]}" data-list-price="${row[2]}" data-price="${row[3]}" data-image-url="${row[4]}" data-id="${row[5]}">
                                                            <div class="row p-2">
                                                                <div class="col-12 p-1" style="border:1px solid #008cba; border-radius: 5px;">
                                                                    <div class="card" style="border:0px;">
                                                                        <img src="${row[4]}" class="card-img-top rounded" height="250" width="300" />
                                                                        <div class="pl-1">
                                                                            <p class="card-title h5"><b style="color:#2c3e50">${row[0]}</b></p>
                                                                            <p class="card-title text-primary">by <b>${row[1]}</b></p>
                                                                        </div>
                                                                        <div style="padding-left:5px;">
                                                                            <p>List Price: <strike><b class="">${row[2]}</b></strike></p>
                                                                        </div>
                                                                        <div style="padding-left:5px;">
                                                                            <p style="color:maroon">As low as: <b class="">${row[3]}</b></p>
                                                                        </div>
                                                                    </div>
                                                                    <div>
                                                                        <a href="/Customer/Home/Details/${row[5]}" class="btn btn-primary form-control">Details</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>`;
                    $productCards.append(cardHtml);
                }
            }
            table.on('draw', updateCards);
            updateCards();
        });
    </script>
}*@

@model IEnumerable<EcommProject.Models.ViewModels.ProductWithTimeViewModel>

<!-- Search Form -->
<form asp-action="Index" method="get">
    <div class="row mb-4">
        <h4 class="col-2">Search:</h4>
        <div class="form-check col-1">
            <input class="form-check-input" type="radio" name="search" id="searchAll" value="All" checked>
            <label class="form-check-label" for="searchAll">All</label>
        </div>
        <div class="form-check col-1">
            <input class="form-check-input" type="radio" name="search" id="searchTitle" value="Title">
            <label class="form-check-label" for="searchTitle">Title</label>
        </div>
        <div class="form-check col-1">
            <input class="form-check-input" type="radio" name="search" id="searchAuthor" value="Author">
            <label class="form-check-label" for="searchAuthor">Author</label>
        </div>
        <input class="col-4 form-control mr-sm-2" type="text" name="searchTxt" placeholder="Search...">
        <button class="btn btn-primary my-2 my-sm-0" type="submit">Search</button>
    </div>
</form>

<div class="d-flex justify-content-between mt-3">
    <!-- New Buttons with Tag Helpers -->
    <a asp-action="Writing" asp-controller="Home" class="btn btn-primary btn-sm">Writing</a>
    <a asp-action="Science" asp-controller="Home" class="btn btn-success btn-sm">Science</a>
</div>

<!-- Product List -->
<div class="row">
    @foreach (var item in Model)
    {
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="card" style="border: 1px solid #008cba; border-radius: 5px;">
                <img src="@item.Product.ImageUrl" class="card-img-top rounded" style="height:280px; object-fit: cover;" />
                <div class="card-body">
                    <h5 class="card-title text-primary" style="color:#2c3e50">@item.Product.Title</h5>
                    <p class="card-text">by <b>@item.Product.Author</b></p>
                    <p class="card-text">
                        <span style="text-decoration: line-through; color: #999;">
                            $@item.Product.ListPrice.ToString("0.00")
                        </span>
                    </p>
                    <p class="card-text" style="color: maroon">
                        As low as: <b>$@item.Product.Price100.ToString("0.00")</b>
                    </p>
                    <p class="card-text" style="color: maroon">
                        @{
                            var discount = (@item.Product.Price100 * @item.Product.Percent) / 100;
                            <b>Discounted Price: @discount</b>
                        }
                    </p>

                    <!-- Remaining Time Logic -->
                    @if (item.RemainingTime > TimeSpan.Zero)
                    {
                        <div class="offer-timer text-center" style="background-color:#ffcc00; border-radius: 5px; padding: 10px;">
                            <p><b>Limited Time Offer!</b></p>
                            <p>Hurry up! This offer ends in:</p>
                            <p>@item.RemainingTime.Hours h @item.RemainingTime.Minutes m @item.RemainingTime.Seconds s</p>
                        </div>
                    }
                    else
                    {
                        <div class="offer-timer text-center" style="background-color:#ffcc00; border-radius: 5px; padding: 10px;">
                            <p><b>Limited Time Offer!</b></p>
                            <p>Offer Ended</p>
                        </div>
                    }

                    <div class="d-flex justify-content-between mt-3">
                        <a href="@Url.Action("Details", "Home", new { id = item.Product.Id })" class="btn btn-secondary btn-sm">Add to Cart</a>
                        <a href="@Url.Action("Details", "Home", new { id = item.Product.Id })" class="btn btn-info btn-sm">Details</a>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
